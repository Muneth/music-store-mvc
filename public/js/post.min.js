const postsContainer=document.getElementById("postContainer"),loading=document.querySelector(".loader"),filter=document.getElementById("filter");let limit=5,page=1;const fetchResponses=async(...a)=>await Promise.all(a.map(a=>fetch(a))),fetchJsons=async(...a)=>{try{const b=await fetchResponses(...a);return await Promise.all(b.map(a=>a.json()))}catch(a){return console.warn(a),null}};async function showPosts(){const[a,b,c]=await fetchJsons(`https://picsum.photos/v2/list?page=${page}&limit=${limit}`,`https://jsonplaceholder.typicode.com/posts?_limit=${limit}&_page=${page}`,`https://randomuser.me/api/?results=${limit}`);if(0===b.length)return;const d=c.results;a.forEach((a,c)=>{postsContainer.insertAdjacentHTML("beforeend",`
      <article class="card"><div class="article__header"><img  src="${a.download_url}" alt="Post image"/></div>
        <div class="article__info--container">
          <h2 class="article__title">${b[c].title}</h2>
          <p class="article__summary">${b[c].body}</p>
          <div class="card__footer">
            <div class="author">
              <div class="profile-picture">
                <img src="${d[c].picture.thumbnail}" alt="Author profile picture"/></div>
              <div class="author__info"><div class="name">${d[c].name.first} ${d[c].name.last}</div>
                <div class="date">${randomDate(new Date(2012,0,1),new Date)}</div>
              </div>
        </div>      
    </article>
      `)})}function randomDate(a,b){return new Date(a.getTime()+Math.random()*(b.getTime()-a.getTime()))}function showLoading(){loading.classList.add("show"),setTimeout(()=>{loading.classList.remove("show"),setTimeout(()=>{page++,showPosts()},600)},1e3)}showPosts(),window.addEventListener("scroll",()=>{const{scrollTop:a,scrollHeight:b,clientHeight:c}=document.documentElement;a+c>=b-5&&showLoading()});